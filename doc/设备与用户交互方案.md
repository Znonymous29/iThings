# 设备与用户交互方案
## 简介
由于在物联网平台中需要直接打通用户与设备,设备与设备之间的交互.  
同时在很多场景中一个设备对应多个人,一个人对应多个设备,设备也会和多个设备交互.  
所以需要设计以满足以上需求的方案  
## 设计思路
由于设备也好,人也好,其实都是需要实现多对多的交互逻辑,所以在实现这个能力的时候其实可以在底层将人和设备都抽象成为用户  
在这样的思路下自然会参考最热的聊天软件,在其中找寻灵感.  
在微信中,用户和用户可以私聊,只要互为好友.同时在微信群中不是好友的用户也可以互相聊天  
而私聊方案符合我们的设备需要绑定到人的这个逻辑,而微信群则符合人可以把人拉进群,把设备拉进群,就可以实现多对多交互  
由于私聊方案在物联网平台中其实只起到了一个权限认证的功能,私聊其实也相当于一个两个用户的群聊,所以私聊默认只进行权限认证  
而群组呢本质上也是权限系统,可以允许群组成员查看对方的历史记录,以及订阅最新消息  
群组中的设备默认是可以互相订阅最新消息及查看对应的设备信息  
如果要实现光设备与设备的多对多的交互则需要有管理员的角色来拉起这么一个组  
之后的低代码功能可以基于以上的权限系统将消息流转到每一个组员,避免发送到不相干的用户那  